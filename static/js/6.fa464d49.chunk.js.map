{"version":3,"sources":["assets/images/userIcon.png","components/Users/UsersAll.module.css","components/Users/UsersAll.jsx"],"names":["module","exports","UsersAll","props","className","s","usersAll","usersAll__title","usersAll__body","bodyUsersAll__row","usersUnfollowed","map","user","bodyUsersAll__item","bodyUsersAll__image","to","id","photos","small","src","userIcon","bodyUsersAll__body","cn","bodyUsersAll","bodyUsersAll__name","name","bodyUsersAll__subscribe","followed","isAuth","bodyUsersAll__abled","disabled","isReadyToggle","some","userId","onClick","e","followUserTC","icon","faUserPlus","bodyUsersAll__disabled","preloader__UsersAllWrapper","preloader__UsersAllBlock","connect","state","usersFollowed","users","countUnfollowed","pageUnfollowed","isFetching","auth","dispatch","getUsersUnfollowedTC","count","follower","isFetchingUsers","bool","unfollowUserTC","getOnceUnfollowedTC","useState","isFetchingOnce","setIsFetchingOnce","page","useEffect","document","addEventListener","scrollHandler","removeEventListener","target","documentElement","scrollHeight","scrollTop","window","innerHeight","preloader__UsersAllContainerWrapper","preloader__UsersAllContainerBlock"],"mappings":"wGAAe,QAA0B,sC,oBCCzCA,EAAOC,QAAU,CAAC,SAAW,2BAA2B,gBAAkB,kCAAkC,eAAiB,iCAAiC,kBAAoB,oCAAoC,mBAAqB,qCAAqC,oBAAsB,sCAAsC,mBAAqB,qCAAqC,mBAAqB,qCAAqC,wBAA0B,0CAA0C,oBAAsB,sCAAsC,uBAAyB,yCAAyC,2BAA6B,6CAA6C,yBAA2B,2CAA2C,oCAAsC,sDAAsD,kCAAoC,sD,+MCWr4BC,EAAW,SAACC,GACtB,OACG,sBAAKC,UAAWC,IAAEC,SAAlB,UACG,qBAAKF,UAAWC,IAAEE,gBAAlB,0BAGA,qBAAKH,UAAWC,IAAEG,eAAlB,SACG,sBAAKJ,UAAWC,IAAEI,kBAAlB,UACIN,EAAMO,gBAAgBC,KAAI,SAACC,GACzB,OACG,sBAAKR,UAAWC,IAAEQ,mBAAlB,UACG,cAAC,IAAD,CAAST,UAAWC,IAAES,oBAAqBC,GAAE,mBAAcH,EAAKI,IAAhE,SACIJ,EAAKK,OAAOC,MACR,qBAAKC,IAAKP,EAAKK,OAAOC,QACtB,qBAAKC,IAAKC,QAGlB,qBAAKhB,UAAWC,IAAEgB,mBAAlB,SACG,sBAAKjB,UAAWkB,IAAGjB,IAAEI,kBAAmBJ,IAAEkB,cAA1C,UACG,cAAC,IAAD,CAASnB,UAAWC,IAAEmB,mBAAoBT,GAAE,mBAAcH,EAAKI,IAA/D,SACG,+BAAOJ,EAAKa,SAEf,qBAAKrB,UAAWC,IAAEqB,wBAAlB,UACKd,EAAKe,UAAYxB,EAAMyB,OACpB,wBAAQxB,UAAWC,IAAEwB,oBAAqBC,SAAU3B,EAAM4B,cAAcC,MAAK,SAACC,GAAD,OAAYA,IAAWrB,EAAKI,MAAKkB,QAAS,SAACC,GAAQhC,EAAMiC,aAAaxB,EAAKI,KAAxJ,SAA+J,cAAC,IAAD,CAAiBqB,KAAMC,QACtL,wBAAQlC,UAAWC,IAAEkC,uBAAwBT,UAAU,EAAvD,SAA6D,cAAC,IAAD,CAAiBO,KAAMC,qBAYlG,qBAAKlC,UAAWC,IAAEmC,2BAAlB,SACG,qBAAKpC,UAAWC,IAAEoC,yBAAlB,SACG,cAAC,IAAD,iBAsEfC,uBApBS,SAACC,GACtB,MAAO,CACJC,cAAeD,EAAME,MAAMD,cAC3BlC,gBAAiBiC,EAAME,MAAMnC,gBAC7BoC,gBAAiBH,EAAME,MAAMC,gBAC7BC,eAAgBJ,EAAME,MAAME,eAC5BC,WAAYL,EAAME,MAAMG,WACxBjB,cAAeY,EAAME,MAAMd,cAC3BH,OAAQe,EAAMM,KAAKrB,WAGE,SAACsB,GACzB,MAAO,CACJC,qBAAsB,SAACC,EAAOL,EAAgBM,GAAeH,EAASC,YAAqBC,EAAOL,EAAgBM,KAClHC,gBAAiB,SAACC,GAAWL,EAASI,YAAgBC,KACtDnB,aAAc,SAACH,GAAaiB,EAASd,YAAaH,KAClDuB,eAAgB,SAACvB,GAAaiB,EAASM,YAAevB,KACtDwB,oBAAqB,WAAQP,EAASO,mBAG7Bf,EA3DU,SAACvC,GAAW,IAAD,EACWuD,oBAAS,GADpB,mBAC1BC,EAD0B,KACVC,EADU,OAEb,CAACzD,EAAM4C,eAAgB5C,EAAM2C,iBAA5Ce,EAF4B,KAEtBT,EAFsB,KAGjCU,qBAAU,WACFH,IACFxD,EAAMsD,sBACNG,GAAkB,MAErB,IACHE,qBAAU,WACH3D,EAAM6C,YACP7C,EAAMgD,qBAAqBC,EAAOS,GAAM,KAE3C,CAAC1D,EAAM6C,aACVc,qBAAU,WAEP,OADAC,SAASC,iBAAiB,SAAUC,GAC7B,WACJF,SAASG,oBAAoB,SAAUD,MAE1C,IACH,IAAMA,EAAgB,SAAC9B,GAAO,IAAD,EACqB,CAACA,EAAEgC,OAAOC,gBAAgBC,aAAclC,EAAEgC,OAAOC,gBAAgBE,UAAWC,OAAOC,aADxG,KAEV,KAFU,WAGvBrE,EAAMmD,iBAAgB,IAG5B,OACG,mCACIK,EACI,cAACzD,EAAD,CAAU0B,OAAQzB,EAAMyB,OAAQ4B,eAAgBrD,EAAMqD,eAAgB9C,gBAAiBP,EAAMO,gBAAiBqB,cAAe5B,EAAM4B,cAAeK,aAAcjC,EAAMiC,eACtK,qBAAKhC,UAAWC,IAAEoE,oCAAlB,SACC,qBAAKrE,UAAWC,IAAEqE,kCAAlB,SACG,cAAC,IAAD","file":"static/js/6.fa464d49.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/userIcon.77e62bce.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersAll\":\"UsersAll_usersAll__1vRPo\",\"usersAll__title\":\"UsersAll_usersAll__title__1uEGh\",\"usersAll__body\":\"UsersAll_usersAll__body__183l_\",\"bodyUsersAll__row\":\"UsersAll_bodyUsersAll__row__1kHWv\",\"bodyUsersAll__item\":\"UsersAll_bodyUsersAll__item__7_vDR\",\"bodyUsersAll__image\":\"UsersAll_bodyUsersAll__image__2z7n5\",\"bodyUsersAll__body\":\"UsersAll_bodyUsersAll__body__M7zsf\",\"bodyUsersAll__name\":\"UsersAll_bodyUsersAll__name__2T50X\",\"bodyUsersAll__subscribe\":\"UsersAll_bodyUsersAll__subscribe__1bPVt\",\"bodyUsersAll__abled\":\"UsersAll_bodyUsersAll__abled__1RmlB\",\"bodyUsersAll__disabled\":\"UsersAll_bodyUsersAll__disabled__nsrSj\",\"preloader__UsersAllWrapper\":\"UsersAll_preloader__UsersAllWrapper__1YKHE\",\"preloader__UsersAllBlock\":\"UsersAll_preloader__UsersAllBlock__3my8H\",\"preloader__UsersAllContainerWrapper\":\"UsersAll_preloader__UsersAllContainerWrapper__21K20\",\"preloader__UsersAllContainerBlock\":\"UsersAll_preloader__UsersAllContainerBlock__2R67t\"};","import React, { useEffect, useState } from 'react'\r\nimport s from './UsersAll.module.css'\r\nimport cn from 'classnames'\r\nimport { connect } from 'react-redux'\r\nimport { followUserTC, getOnceUnfollowedTC, getUsersUnfollowedTC, isFetchingUsers, unfollowUserTC } from '../../redux/users.reducer'\r\nimport Preloader from '../Common/Preloader/Preloader'\r\nimport userIcon from '../../assets/images/userIcon.png'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faUserPlus } from '@fortawesome/free-solid-svg-icons'\r\nimport { NavLink } from 'react-router-dom'\r\nimport PreloaderLine from '../Common/Preloader/PreloaderLine/PreloaderLine'\r\n\r\nexport const UsersAll = (props) => {\r\n   return (\r\n      <div className={s.usersAll}>\r\n         <div className={s.usersAll__title}>\r\n            Find friends\r\n         </div>\r\n         <div className={s.usersAll__body}>\r\n            <div className={s.bodyUsersAll__row}>\r\n               {props.usersUnfollowed.map((user) => {\r\n                  return (\r\n                     <div className={s.bodyUsersAll__item}>\r\n                        <NavLink className={s.bodyUsersAll__image} to={`/profile/${user.id}`}>\r\n                           {user.photos.small\r\n                              ? <img src={user.photos.small} />\r\n                              : <img src={userIcon} />\r\n                           }\r\n                        </NavLink>\r\n                        <div className={s.bodyUsersAll__body}>\r\n                           <div className={cn(s.bodyUsersAll__row, s.bodyUsersAll)}>\r\n                              <NavLink className={s.bodyUsersAll__name} to={`/profile/${user.id}`}>\r\n                                 <span>{user.name}</span>\r\n                              </NavLink>\r\n                              <div className={s.bodyUsersAll__subscribe}>\r\n                                 {!user.followed && props.isAuth\r\n                                    ? <button className={s.bodyUsersAll__abled} disabled={props.isReadyToggle.some((userId) => userId === user.id)} onClick={(e) => { props.followUserTC(user.id) }}><FontAwesomeIcon icon={faUserPlus} /></button>\r\n                                    : <button className={s.bodyUsersAll__disabled} disabled={true}><FontAwesomeIcon icon={faUserPlus} /></button>\r\n                                 }\r\n                              </div>\r\n                           </div>\r\n                        </div>\r\n                     </div>\r\n                  )\r\n               })\r\n               }\r\n               {\r\n                  function () {\r\n                     return (\r\n                        <div className={s.preloader__UsersAllWrapper}>\r\n                           <div className={s.preloader__UsersAllBlock}>\r\n                              <PreloaderLine />\r\n                           </div>\r\n                        </div >\r\n                     )\r\n                  }()\r\n               }\r\n            </div>\r\n         </div>\r\n      </div>\r\n   )\r\n}\r\nconst UserAllContainer = (props) => {\r\n   const [isFetchingOnce, setIsFetchingOnce] = useState(false)\r\n   let [page, count] = [props.pageUnfollowed, props.countUnfollowed]\r\n   useEffect(() => {\r\n      if (!isFetchingOnce) {\r\n         props.getOnceUnfollowedTC()\r\n         setIsFetchingOnce(true)\r\n      }\r\n   }, [])\r\n   useEffect(() => {\r\n      if (props.isFetching) {\r\n         props.getUsersUnfollowedTC(count, page, false)\r\n      }\r\n   }, [props.isFetching])\r\n   useEffect(() => {\r\n      document.addEventListener('scroll', scrollHandler)\r\n      return () => {\r\n         document.removeEventListener('scroll', scrollHandler)\r\n      }\r\n   }, [])\r\n   const scrollHandler = (e) => {\r\n      const [scrollHeight, scrollTop, innerHeight] = [e.target.documentElement.scrollHeight, e.target.documentElement.scrollTop, window.innerHeight]\r\n      if (scrollTop + 100 >= scrollHeight - innerHeight) {\r\n         props.isFetchingUsers(true)\r\n      }\r\n   }\r\n   return (\r\n      <>\r\n         {isFetchingOnce\r\n            ? <UsersAll isAuth={props.isAuth} unfollowUserTC={props.unfollowUserTC} usersUnfollowed={props.usersUnfollowed} isReadyToggle={props.isReadyToggle} followUserTC={props.followUserTC} />\r\n            : <div className={s.preloader__UsersAllContainerWrapper}>\r\n               <div className={s.preloader__UsersAllContainerBlock}>\r\n                  <Preloader />\r\n               </div>\r\n            </div >\r\n         }\r\n      </>\r\n   )\r\n}\r\nconst mapStateToProps = (state) => {\r\n   return {\r\n      usersFollowed: state.users.usersFollowed,\r\n      usersUnfollowed: state.users.usersUnfollowed,\r\n      countUnfollowed: state.users.countUnfollowed,\r\n      pageUnfollowed: state.users.pageUnfollowed,\r\n      isFetching: state.users.isFetching,\r\n      isReadyToggle: state.users.isReadyToggle,\r\n      isAuth: state.auth.isAuth\r\n   }\r\n}\r\nconst mapDispatchToProps = (dispatch) => {\r\n   return {\r\n      getUsersUnfollowedTC: (count, pageUnfollowed, follower) => { dispatch(getUsersUnfollowedTC(count, pageUnfollowed, follower)) },\r\n      isFetchingUsers: (bool) => { dispatch(isFetchingUsers(bool)) },\r\n      followUserTC: (userId) => { dispatch(followUserTC(userId)) },\r\n      unfollowUserTC: (userId) => { dispatch(unfollowUserTC(userId)) },\r\n      getOnceUnfollowedTC: () => { dispatch(getOnceUnfollowedTC()) }\r\n   }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserAllContainer)"],"sourceRoot":""}